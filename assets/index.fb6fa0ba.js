(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerpolicy&&(u.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?u.credentials="include":o.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();try{self["workbox:window:6.5.3"]&&_()}catch{}function W(e,t){return new Promise(function(n){var r=new MessageChannel;r.port1.onmessage=function(o){n(o.data)},e.postMessage(t,[r.port2])})}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t){var n;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=function(o,u){if(o){if(typeof o=="string")return x(o,u);var s=Object.prototype.toString.call(o).slice(8,-1);return s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set"?Array.from(o):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?x(o,u):void 0}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.3"]&&_()}catch{}var P=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})};function I(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var g=function(e,t){this.type=e,Object.assign(this,t)};function y(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Z(){}var G={type:"SKIP_WAITING"};function q(e,t){if(!t)return e&&e.then?e.then(Z):Promise.resolve()}var J=function(e){var t,n;function r(f,c){var i,a;return c===void 0&&(c={}),(i=e.call(this)||this).nn={},i.tn=0,i.rn=new P,i.en=new P,i.on=new P,i.un=0,i.an=new Set,i.cn=function(){var d=i.fn,l=d.installing;i.tn>0||!I(l.scriptURL,i.sn.toString())||performance.now()>i.un+6e4?(i.vn=l,d.removeEventListener("updatefound",i.cn)):(i.hn=l,i.an.add(l),i.rn.resolve(l)),++i.tn,l.addEventListener("statechange",i.ln)},i.ln=function(d){var l=i.fn,m=d.target,p=m.state,L=m===i.vn,D={sw:m,isExternal:L,originalEvent:d};!L&&i.mn&&(D.isUpdate=!0),i.dispatchEvent(new g(p,D)),p==="installed"?i.wn=self.setTimeout(function(){p==="installed"&&l.waiting===m&&i.dispatchEvent(new g("waiting",D))},200):p==="activating"&&(clearTimeout(i.wn),L||i.en.resolve(m))},i.dn=function(d){var l=i.hn,m=l!==navigator.serviceWorker.controller;i.dispatchEvent(new g("controlling",{isExternal:m,originalEvent:d,sw:l,isUpdate:i.mn})),m||i.on.resolve(l)},i.gn=(a=function(d){var l=d.data,m=d.ports,p=d.source;return y(i.getSW(),function(){i.an.has(p)&&i.dispatchEvent(new g("message",{data:l,originalEvent:d,ports:m,sw:p}))})},function(){for(var d=[],l=0;l<arguments.length;l++)d[l]=arguments[l];try{return Promise.resolve(a.apply(this,d))}catch(m){return Promise.reject(m)}}),i.sn=f,i.nn=c,navigator.serviceWorker.addEventListener("message",i.gn),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o,u,s=r.prototype;return s.register=function(f){var c=(f===void 0?{}:f).immediate,i=c!==void 0&&c;try{var a=this;return function(d,l){var m=d();return m&&m.then?m.then(l):l(m)}(function(){if(!i&&document.readyState!=="complete")return q(new Promise(function(d){return window.addEventListener("load",d)}))},function(){return a.mn=Boolean(navigator.serviceWorker.controller),a.yn=a.pn(),y(a.bn(),function(d){a.fn=d,a.yn&&(a.hn=a.yn,a.en.resolve(a.yn),a.on.resolve(a.yn),a.yn.addEventListener("statechange",a.ln,{once:!0}));var l=a.fn.waiting;return l&&I(l.scriptURL,a.sn.toString())&&(a.hn=l,Promise.resolve().then(function(){a.dispatchEvent(new g("waiting",{sw:l,wasWaitingBeforeRegister:!0}))}).then(function(){})),a.hn&&(a.rn.resolve(a.hn),a.an.add(a.hn)),a.fn.addEventListener("updatefound",a.cn),navigator.serviceWorker.addEventListener("controllerchange",a.dn),a.fn})})}catch(d){return Promise.reject(d)}},s.update=function(){try{return this.fn?q(this.fn.update()):void 0}catch(f){return Promise.reject(f)}},s.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},s.messageSW=function(f){try{return y(this.getSW(),function(c){return W(c,f)})}catch(c){return Promise.reject(c)}},s.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&W(this.fn.waiting,G)},s.pn=function(){var f=navigator.serviceWorker.controller;return f&&I(f.scriptURL,this.sn.toString())?f:void 0},s.bn=function(){try{var f=this;return function(c,i){try{var a=c()}catch(d){return i(d)}return a&&a.then?a.then(void 0,i):a}(function(){return y(navigator.serviceWorker.register(f.sn,f.nn),function(c){return f.un=performance.now(),c})},function(c){throw c})}catch(c){return Promise.reject(c)}},o=r,(u=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&z(o.prototype,u),r}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(n,r){this.Sn(n).add(r)},t.removeEventListener=function(n,r){this.Sn(n).delete(r)},t.dispatchEvent=function(n){n.target=this;for(var r,o=H(this.Sn(n.type));!(r=o()).done;)(0,r.value)(n)},t.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},e}());function Q(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisterError:u}=e;let s;const f=async(c=!0)=>{};return"serviceWorker"in navigator&&(s=new J("/reusable-comment-component/./sw.js",{scope:"/reusable-comment-component/",type:"classic"}),s.addEventListener("activated",c=>{c.isUpdate?window.location.reload():r==null||r()}),s.register({immediate:t}).then(c=>{o==null||o(c)}).catch(c=>{u==null||u(c)})),f}const U=document.createElement("template");U.innerHTML=`
  <style>
    .comment_div {
      width: 100%;
      padding: 2rem;
    }
    h3, h4 {
      font-weight: bold;
      margin: 1rem 0;
    }
    h3 {
      font-size: 1.4rem;
    }
    p {
      font-size: .9rem;
      line-height: 1.4rem;
    }
    strong {
      font-weight: bold;
    }
  </style>
  <div class="comment_div">
    <h3></h3>
    <h4></h4>
    <p><strong>Comment:</strong> <span id='comment'></span></p>
    <p><strong>Commented on: </strong><span id='data'></span></p>
  </div>`;class X extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(U.content.cloneNode(!0)),this.likeCount=this.shadowRoot.querySelector("#like")}connectedCallback(){this.shadowRoot.querySelector("h3").textContent=`Name: ${this.getAttribute("name")} `,this.shadowRoot.querySelector("h4").textContent=`Email: ${this.getAttribute("email")}  `,this.shadowRoot.querySelector("#comment").textContent=this.getAttribute("comment"),this.shadowRoot.querySelector("#data").textContent=this.getAttribute("data")}}const Y=(e,t)=>t.some(n=>e instanceof n);let O,T;function ee(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function te(){return T||(T=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const V=new WeakMap,R=new WeakMap,$=new WeakMap,B=new WeakMap,j=new WeakMap;function ne(e){const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("success",u),e.removeEventListener("error",s)},u=()=>{n(h(e.result)),o()},s=()=>{r(e.error),o()};e.addEventListener("success",u),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&V.set(n,e)}).catch(()=>{}),j.set(t,e),t}function re(e){if(R.has(e))return;const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("complete",u),e.removeEventListener("error",s),e.removeEventListener("abort",s)},u=()=>{n(),o()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",u),e.addEventListener("error",s),e.addEventListener("abort",s)});R.set(e,t)}let A={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return R.get(e);if(t==="objectStoreNames")return e.objectStoreNames||$.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function oe(e){A=e(A)}function ie(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(C(this),t,...n);return $.set(r,t.sort?t.sort():[t]),h(r)}:te().includes(e)?function(...t){return e.apply(C(this),t),h(V.get(this))}:function(...t){return h(e.apply(C(this),t))}}function se(e){return typeof e=="function"?ie(e):(e instanceof IDBTransaction&&re(e),Y(e,ee())?new Proxy(e,A):e)}function h(e){if(e instanceof IDBRequest)return ne(e);if(B.has(e))return B.get(e);const t=se(e);return t!==e&&(B.set(e,t),j.set(t,e)),t}const C=e=>j.get(e);function ae(e,t,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const s=indexedDB.open(e,t),f=h(s);return r&&s.addEventListener("upgradeneeded",c=>{r(h(s.result),c.oldVersion,c.newVersion,h(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),f.then(c=>{u&&c.addEventListener("close",()=>u()),o&&c.addEventListener("versionchange",()=>o())}).catch(()=>{}),f}function ce(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),h(n).then(()=>{})}const ue=["get","getKey","getAll","getAllKeys","count"],le=["put","add","delete","clear"],k=new Map;function N(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(k.get(t))return k.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=le.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||ue.includes(n)))return;const u=async function(s,...f){const c=this.transaction(s,o?"readwrite":"readonly");let i=c.store;return r&&(i=i.index(f.shift())),(await Promise.all([i[n](...f),o&&c.done]))[0]};return k.set(t,u),u}oe(e=>({...e,get:(t,n,r)=>N(t,n)||e.get(t,n,r),has:(t,n)=>!!N(t,n)||e.has(t,n)}));const F=ae("myDB",1,{upgrade(e){e.createObjectStore("comments"),e.createObjectStore("performance")}});async function de(e,t){return(await F).put("comments",e,t)}async function fe(e){return(await F).getAll("comments").then(t=>{if(t.length)for(let n=0;n<t.length;n++){const r=document.createElement("user-comment");r.setAttribute("name",t[n].usernameValue),r.setAttribute("email",t[n].emailValue),r.setAttribute("comment",t[n].commentValue),r.setAttribute("data",t[n].data),e.append(r)}})}async function me(){await ce("myDB",{blocked(){console.log("deletions is successful")}})}const he=Q({onNeedRefresh(){he(),console.log("Need Refresh")},onOfflineReady(){console.log("Offline Ready")},onRegistered(){console.log("Registered")},onRegisterError(e){console.log("Register Error"),console.error(e)}});window.customElements.define("user-comment",X);const pe=document.querySelector(".main_container"),ve=document.querySelector("#form"),M=document.querySelector("#username"),b=document.querySelector("#email"),E=document.querySelector("#comment"),S=document.querySelector("#input-checkbox"),ge=document.querySelector("#clear_bnt"),v=(e,t)=>{const n=e.parentElement,r=n.querySelector(".error");r.innerText=t,n.classList.add("error"),n.classList.remove("success")},w=e=>{const t=e.parentElement,n=t.querySelector(".error");n.innerText="",t.classList.add("success"),t.classList.remove("error")},K=e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase()),ye=(e,t,n)=>{e===""?v(M,"Username is required"):w(M),t===""?v(b,"Email is required"):K(t)?w(b):v(b,"Provide a valid email address");const o=30-n.length;o===30?v(E,"Comments is required"):o>0?v(E,`${o} more characters required`):w(E),S.checked?w(S):v(S,"Can't proceed as you didn't agree to the terms!")};ve.addEventListener("submit",e=>{e.preventDefault();const t=M.value.trim(),n=b.value.trim(),r=E.value.trim(),o=new Date().toString().slice(0,15);!t||!n||!K(n)||r.length<=30||!S.checked?ye(t,n,r):(de({usernameValue:t,emailValue:n,commentValue:r,data:o},n),window.location.reload())});ge.addEventListener("click",()=>{me(),window.location.reload()});fe(pe);
